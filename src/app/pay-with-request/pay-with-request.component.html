<div class="wrapper bg-grey-white-blue">
  <header class="d-flex flex-wrap justify-content-between align-items-center px-3">
    <div style="flex: 1">
      <a routerLink="/" class="d-flex align-items-center">
        <img class="px-3 request-logo" src="assets/img/request-logo.png">
        <span class="semi-bold fc-primary">Request&nbsp;<sup><small><small>ALPHA TESTNET</small></small></sup></span>
      </a>
    </div>
    <div class="mr-3 text-right" style="flex: 1">
      <app-account></app-account>
    </div>
  </header>
  <div style="flex: 1 0 auto">
    <div class="row my-5">
      <div class="mx-auto col-md-6">
        <mat-spinner *ngIf="!signedRequest; else requestBlock" class="mx-auto"></mat-spinner>
        <ng-template #requestBlock>
          <mat-card class="p-0 br-7 sh-blue">
            <div class="d-flex bg-primary p-4 btr-7">
              <img class="px-3" style="max-height: 75px;" src="assets/img/request-logo.png">
              <div class="ml-auto text-right px-3 fc-white">
                <h4 class="semi-bold fs-18">Request to broadcast</h4>
                <div class="fs-14" [style.opacity]="'0.5'">
                  <i>{{ date | date: 'fullDate'}}</i>
                </div>
              </div>
            </div>
            <div class="bg-grey-whiter fc-blue-grey p-4 d-flex flex-wrap">
              <div class="d-flex mb-3 m-lg-0" style="flex: 1">
                <div class="px-3">
                  <angular-blockies *ngIf="signedRequest.payeesIdAddress[0]" [options]="{ seed: signedRequest.payeesIdAddress[0].toLowerCase() }" class="blockies" style="width: 50px; height: 50px;"></angular-blockies>
                </div>
                <div class="fs-14 lh-18">
                  <div class="mb-1" [style.opacity]="'0.5'">FROM</div>
                  <div class="semi-bold">ETH address</div>
                  <div>{{ signedRequest.payeesIdAddress[0] }}</div>
                </div>
              </div>
            </div>
            <div class="fc-blue-grey p-4" style="border-bottom: 1px solid #DFE5EC">
              <div *ngIf="ipfsData">
                <div class="px-3" *ngFor="let e of Object.entries(ipfsData)">
                  <div class="semi-bold">{{ e[0] }}:</div>
                  <div>{{ e[1] }}</div>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="ml-auto d-inline-block semi-bold fc-primary px-5 py-3" style="background: #DFE5EC">
                <div class="fs-14">AMOUNT</div>
                <div class="fs-24">{{ web3Service.fromWei(signedRequest.expectedAmounts[0]) }} ETH</div>
              </div>
            </div>
            <div class="p-5">
            </div>
            <mat-toolbar class="p-0 bbr-7 cta-toolbar" [style.height]="'90px'">
              <div *ngIf="web3Service.accountObservable | async; else viewMode" class="h-100">
                <button class="fs-18 no-focus-overlay w-100" mat-raised-button color="accent" (click)="acceptAndPay()">
                  <span>Accept & Pay</span>
                </button>
              </div>
              <ng-template #viewMode>
                <div class="text-center fs-12 lh-14 h-100">
                  <mat-icon class="mx-auto mt-3" color="accent">remove_red_eye</mat-icon>
                  <div class="fc-primary semi-bold">
                    <i>You are in view mode.<br/> Connect your metamask account to interact with this Request.</i>
                  </div>
                </div>
              </ng-template>
            </mat-toolbar>
          </mat-card>
          <div class="mt-3 fs-12 fc-blue-grey">
            <i class="fa fa-lock"></i>&nbsp;<span>Request.Network - 2018 -</span>
            <a (click)="cancelRequest()" [style.textDecoration]="'underline'">Cancel & go back to merchant</a>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>